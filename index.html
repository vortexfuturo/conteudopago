<!doctype html>
<html lang="pt-BR" translate="no">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google" content="notranslate" />
    <title>privacylarissa</title>

    <!-- Captura e PersistÃªncia de UTMs -->
    <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const utms = ['utm_source','utm_medium','utm_campaign','utm_content','utm_term'];
      utms.forEach(key => {
        const value = params.get(key);
        if (value) {
          localStorage.setItem(key, value);
        }
      });

      window.keepUTM = function(url) {
        const stored = {};
        utms.forEach(key => {
          const value = localStorage.getItem(key);
          if (value) stored[key] = value;
        });
        const query = new URLSearchParams(stored).toString();
        if (query) {
          const separator = url.includes('?') ? '&' : '?';
          return url + separator + query;
        }
        return url;
      };
    })();
    </script>

    <!-- Meta Pixels -->
    <script>
      !(function (f, b, e, v, n, t, s) {
        if (f.fbq) return; n = f.fbq = function () {
          n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);
        };
        if (!f._fbq) f._fbq = n;
        n.push = n; n.loaded = !0; n.version = '2.0'; n.queue = [];
        t = b.createElement(e); t.async = !0;
        t.src = v; s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s);
      })(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');

      const pixels = [
        '1421303535603181',
        '636629812664247',
        '825290560048721',
        '804023795319915',
        '1153949476657735'
      ];

      function hasPurchaseFired() {
        return document.cookie.includes('purchase_fired=true');
      }

      function markPurchaseFired() {
        const expires = new Date();
        expires.setTime(expires.getTime() + (365 * 24 * 60 * 60 * 1000));
        document.cookie = `purchase_fired=true; expires=${expires.toUTCString()}; path=/`;
      }

      if (!hasPurchaseFired()) {
        pixels.forEach(id => {
          fbq('init', id);
          fbq('set', 'autoConfig', false, id);
          fbq('trackSingle', id, 'Purchase', { value: 10.00, currency: 'BRL' });
        });
        markPurchaseFired();
      }
    </script>
    <!-- End Meta Pixels -->
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
